<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">src</li><li class="chapter-item "><a href="src/IMetaBoardV1.sol/interface.IMetaBoardV1.html">IMetaBoardV1</a></li><li class="chapter-item "><a href="src/IMetaV1.sol/error.UnexpectedMetaHash.html">UnexpectedMetaHash</a></li><li class="chapter-item "><a href="src/IMetaV1.sol/error.NotRainMetaV1.html">NotRainMetaV1</a></li><li class="chapter-item "><a href="src/IMetaV1.sol/interface.IMetaV1.html">IMetaV1</a></li><li class="chapter-item "><a href="src/IMetaV1.sol/constants.IMetaV1.html">IMetaV1 constants</a></li><li class="chapter-item "><a href="src/LibMeta.sol/library.LibMeta.html">LibMeta</a></li><li class="chapter-item "><a href="src/MetaBoard.sol/contract.MetaBoard.html">MetaBoard</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rainprotocol/rain.metadata" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="rainmetadata"><a class="header" href="#rainmetadata">rain.metadata</a></h1>
<h2 id="specs"><a class="header" href="#specs">Specs</a></h2>
<p>MetadataV1 spec - https://github.com/rainprotocol/specs/blob/main/metadata-v1.md</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="imetaboardv1"><a class="header" href="#imetaboardv1">IMetaBoardV1</a></h1>
<p><a href="https://github.com/rainprotocol/rain.metadata/blob/b3c014eaf802d4c55906025d6d23e828a9c08f74/src/IMetaBoardV1.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/IMetaBoardV1.sol//src/IMetaV1.sol/interface.IMetaV1.html">IMetaV1</a></p>
<p>Defines a general purpose contract that anon may call to emit ANY metadata.
Anons MAY send garbage and malicious metadata so it is up to tooling to
discard any suspect data before use, and generally treat it all as untrusted.</p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="emitmeta"><a class="header" href="#emitmeta">emitMeta</a></h3>
<p>Emit a single MetaV1 event. Typically this is sufficient for most use
cases as a single MetaV1 event can contain many metas as a single
cbor-seq. Metadata MUST match the metadata V1 specification for Rain
metadata or tooling MAY drop it. <code>IMetaBoardV1</code> contracts MUST revert any
metadata that does not start with the Rain metadata magic number.</p>
<pre><code class="language-solidity">function emitMeta(uint256 subject, bytes calldata meta) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>subject</code></td><td><code>uint256</code></td><td>As per <code>IMetaV1</code> event.</td></tr>
<tr><td><code>meta</code></td><td><code>bytes</code></td><td>As per <code>IMetaV1</code> event.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedmetahash"><a class="header" href="#unexpectedmetahash">UnexpectedMetaHash</a></h1>
<p><a href="https://github.com/rainprotocol/rain.metadata/blob/b3c014eaf802d4c55906025d6d23e828a9c08f74/src/IMetaV1.sol">Git Source</a></p>
<p>Thrown when hashed metadata does NOT match the expected hash.</p>
<pre><code class="language-solidity">error UnexpectedMetaHash(bytes32 expectedHash, bytes32 actualHash);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="notrainmetav1"><a class="header" href="#notrainmetav1">NotRainMetaV1</a></h1>
<p><a href="https://github.com/rainprotocol/rain.metadata/blob/b3c014eaf802d4c55906025d6d23e828a9c08f74/src/IMetaV1.sol">Git Source</a></p>
<p>Thrown when some bytes are expected to be rain meta and are not.</p>
<pre><code class="language-solidity">error NotRainMetaV1(bytes unmeta);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="imetav1"><a class="header" href="#imetav1">IMetaV1</a></h1>
<p><a href="https://github.com/rainprotocol/rain.metadata/blob/b3c014eaf802d4c55906025d6d23e828a9c08f74/src/IMetaV1.sol">Git Source</a></p>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="metav1"><a class="header" href="#metav1">MetaV1</a></h3>
<p>An onchain wrapper to carry arbitrary Rain metadata. Assigns the sender
to the metadata so that tooling can easily drop/ignore data from unknown
sources. As metadata is about something, the subject MUST be provided.</p>
<pre><code class="language-solidity">event MetaV1(address sender, uint256 subject, bytes meta);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants"><a class="header" href="#constants">Constants</a></h1>
<p><a href="https://github.com/rainprotocol/rain.metadata/blob/b3c014eaf802d4c55906025d6d23e828a9c08f74/src/IMetaV1.sol">Git Source</a></p>
<h3 id="meta_magic_number_v1"><a class="header" href="#meta_magic_number_v1">META_MAGIC_NUMBER_V1</a></h3>
<p><em>Randomly generated magic number with first bytes oned out.
https://github.com/rainprotocol/specs/blob/main/metadata-v1.md</em></p>
<pre><code class="language-solidity">uint64 constant META_MAGIC_NUMBER_V1 = 0xff0a89c674ee7874;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libmeta"><a class="header" href="#libmeta">LibMeta</a></h1>
<p><a href="https://github.com/rainprotocol/rain.metadata/blob/b3c014eaf802d4c55906025d6d23e828a9c08f74/src/LibMeta.sol">Git Source</a></p>
<p>Need a place to put data that can be handled offchain like ABIs that
IS NOT etherscan.</p>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="israinmetav1"><a class="header" href="#israinmetav1">isRainMetaV1</a></h3>
<p>Returns true if the metadata bytes are prefixed by the Rain meta magic
number. DOES NOT attempt to validate the body of the metadata as offchain
tooling will be required for this.</p>
<pre><code class="language-solidity">function isRainMetaV1(bytes memory meta_) internal pure returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>meta_</code></td><td><code>bytes</code></td><td>The data that may be rain metadata.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if <code>meta_</code> is metadata, false otherwise.</td></tr>
</tbody></table>
</div>
<h3 id="checkmetaunhashed"><a class="header" href="#checkmetaunhashed">checkMetaUnhashed</a></h3>
<p>Reverts if the provided <code>meta_</code> is NOT metadata according to
<code>isRainMetaV1</code>.</p>
<pre><code class="language-solidity">function checkMetaUnhashed(bytes memory meta_) internal pure;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>meta_</code></td><td><code>bytes</code></td><td>The metadata bytes to check.</td></tr>
</tbody></table>
</div>
<h3 id="checkmetahashed"><a class="header" href="#checkmetahashed">checkMetaHashed</a></h3>
<p>Reverts if the provided <code>meta_</code> is NOT metadata according to
<code>isRainMetaV1</code> OR it does not match the expected hash of its data.</p>
<pre><code class="language-solidity">function checkMetaHashed(bytes32 expectedHash_, bytes memory meta_) internal pure;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>expectedHash_</code></td><td><code>bytes32</code></td><td></td></tr>
<tr><td><code>meta_</code></td><td><code>bytes</code></td><td>The metadata to check.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="metaboard"><a class="header" href="#metaboard">MetaBoard</a></h1>
<p><a href="https://github.com/rainprotocol/rain.metadata/blob/b3c014eaf802d4c55906025d6d23e828a9c08f74/src/MetaBoard.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/MetaBoard.sol//src/IMetaBoardV1.sol/interface.IMetaBoardV1.html">IMetaBoardV1</a></p>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="emitmeta-1"><a class="header" href="#emitmeta-1">emitMeta</a></h3>
<p>Emit a single MetaV1 event. Typically this is sufficient for most use
cases as a single MetaV1 event can contain many metas as a single
cbor-seq. Metadata MUST match the metadata V1 specification for Rain
metadata or tooling MAY drop it. <code>IMetaBoardV1</code> contracts MUST revert any
metadata that does not start with the Rain metadata magic number.</p>
<pre><code class="language-solidity">function emitMeta(uint256 subject_, bytes calldata meta_) public;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>subject_</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>meta_</code></td><td><code>bytes</code></td><td></td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
